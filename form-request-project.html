<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DGA Project Onboarding Form</title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    
    <style>
        .step-indicator {
            display: flex;
            justify-content: space-between;
            margin-bottom: 2rem;
            position: relative;
        }
        
        .step-indicator::before {
            content: '';
            position: absolute;
            top: 20px;
            left: 0;
            right: 0;
            height: 2px;
            background: #dee2e6;
            z-index: -1;
        }
        
        .step-item {
            flex: 1;
            text-align: center;
            position: relative;
        }
        
        .step-circle {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #fff;
            border: 2px solid #dee2e6;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 0.5rem;
            font-weight: bold;
            color: #6c757d;
            transition: all 0.3s ease;
        }
        
        .step-item.active .step-circle {
            background: #0d6efd;
            border-color: #0d6efd;
            color: white;
        }
        
        .step-item.completed .step-circle {
            background: #198754;
            border-color: #198754;
            color: white;
        }
        
        .step-label {
            font-size: 0.875rem;
            color: #6c757d;
        }
        
        .step-item.active .step-label {
            color: #0d6efd;
            font-weight: 600;
        }
        
        .step-item.completed .step-label {
            color: #198754;
        }
        
        .form-step {
            display: none;
        }
        
        .form-step.active {
            display: block;
        }
    </style>
</head>
<body class="bg-light">

    <div class="container my-5">
        <div class="row">
            <div class="col-lg-8 col-xl-7 mx-auto">
                
                <div class="card shadow-sm border-0 rounded-4 p-4 p-md-5">

                    <h1 class="h3 text-center mb-4">
                        <i class="bi bi-rocket-takeoff-fill text-primary"></i>
                        แบบฟอร์มลงทะเบียนโครงการใหม่
                    </h1>

                    <!-- Step Indicator -->
                    <div class="step-indicator">
                        <div class="step-item active" data-step="1">
                            <div class="step-circle">1</div>
                            <div class="step-label">ข้อมูลโครงการ</div>
                        </div>
                        <div class="step-item" data-step="2">
                            <div class="step-circle">2</div>
                            <div class="step-label">ข้อมูลเทคนิค</div>
                        </div>
                    </div>

                    <form id="project-onboarding-form">

                        <!-- Step 1: Business Approval -->
                        <div class="form-step active" id="step-1">
                            <h2 class="h5 border-bottom pb-2 mb-3">ส่วนที่ 1: ข้อมูลโครงการ (Business Approval)</h2>
                            
                            <div class="mb-3">
                                <label for="project-name" class="form-label">1. ชื่อโครงการ (Project Name) *</label>
                                <input type="text" class="form-control" id="project-name" required>
                            </div>

                            <div class="mb-3">
                                <label for="cost-center" class="form-label">2. รหัสโครงการ / Cost Center *</label>
                                <input type="text" class="form-control" id="cost-center" required>
                            </div>

                            <div class="mb-3">
                                <label for="project-manager" class="form-label">3. Project Manager / ผู้รับผิดชอบหลัก *</label>
                                <input type="text" class="form-control" id="project-manager" required>
                            </div>
                            
                            <div class="mb-3">
                                <label for="project-description" class="form-label">4. คำอธิบายโครงการ (Business Objective) *</label>
                                <textarea class="form-control" id="project-description" rows="3" required></textarea>
                            </div>

                            <div class="row mb-3">
                                <div class="col-md-6">
                                    <label for="project-start-date" class="form-label">5. วันที่เริ่มโครงการ (Project Start Date) *</label>
                                    <input type="date" class="form-control" id="project-start-date" required>
                                </div>
                                <div class="col-md-6">
                                    <label for="project-end-date" class="form-label">6. วันที่สิ้นสุดโครงการ (Project End Date) *</label>
                                    <input type="date" class="form-control" id="project-end-date" required>
                                    <div class="invalid-feedback" id="date-error">
                                        วันที่สิ้นสุดโครงการต้องมาหลังวันที่เริ่มโครงการ
                                    </div>
                                </div>
                            </div>

                            <div class="mb-3">
                                <label for="project-sla" class="form-label">7. SLA ที่ต้องการ (Desired SLA) *</label>
                                <input type="text" class="form-control" id="project-sla" placeholder="เช่น 99.9% uptime, Response time < 2s" required>
                            </div>

                            <div class="mb-3">
                                <label for="project-priority" class="form-label">8. ระดับความสำคัญ (Priority) *</label>
                                <select class="form-select" id="project-priority" required>
                                    <option value="">เลือกระดับความสำคัญ</option>
                                    <option value="cii">CII (Critical Information Infrastructure)</option>
                                    <option value="public-service">บริการประชาชน</option>
                                    <option value="government-service">บริการหน่วยงานรัฐ</option>
                                    <option value="other">อื่นๆ</option>
                                </select>
                            </div>

                            <div class="mb-3">
                                <label class="form-label">9. สภาพแวดล้อมที่ต้องการ (Environments) *</label>
                                <div>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input environment-checkbox" type="checkbox" value="dev" id="env-dev">
                                        <label class="form-check-label" for="env-dev">Development</label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input environment-checkbox" type="checkbox" value="staging" id="env-staging">
                                        <label class="form-check-label" for="env-staging">Staging</label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input environment-checkbox" type="checkbox" value="prod" id="env-prod">
                                        <label class="form-check-label" for="env-prod">Production</label>
                                    </div>
                                </div>
                                <div class="invalid-feedback d-block" id="env-error" style="display: none !important;">
                                    กรุณาเลือกอย่างน้อย 1 สภาพแวดล้อม
                                </div>
                            </div>

                            <div class="d-flex justify-content-end gap-2 mt-4">
                                <button type="button" class="btn btn-secondary">บันทึกร่าง (Save Draft)</button>
                                <button type="button" class="btn btn-primary" id="next-step-1">
                                    ถัดไป (Next)
                                    <i class="bi bi-arrow-right"></i>
                                </button>
                            </div>
                        </div>

                        <!-- Step 2: Technical Approval -->
                        <div class="form-step" id="step-2">
                            <h2 class="h5 border-bottom pb-2 mb-3">ส่วนที่ 2: ข้อมูลเทคนิค (Technical Approval)</h2>

                            <div class="mb-3">
                                <label for="vendor-info" class="form-label">10. ข้อมูล Vendor (ถ้ามี)</label>
                                <input type="text" class="form-control" id="vendor-info">
                            </div>

                            <div class="mb-3">
                                <label for="architecture-file" class="form-label">11. ไฟล์สถาปัตยกรรมที่เสนอ *</label>
                                <input class="form-control" type="file" id="architecture-file" required>
                            </div>

                            <div class="mb-3">
                                <label for="architecture-desc" class="form-label">12. คำอธิบายสถาปัตยกรรม (AWS Services ที่จะใช้)</label>
                                <textarea class="form-control" id="architecture-desc" rows="3" placeholder="เช่น ใช้ ECS Fargate, RDS PostgreSQL, S3..."></textarea>
                            </div>

                            <div class="mb-3">
                                <label class="form-label">13. โมเดลการสนับสนุนที่ร้องขอ *</label>
                                
                                <div class="border rounded p-3 mb-2">
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="support_model" id="model-3" value="full-itc" required>
                                        <label class="form-check-label fw-bold" for="model-3">
                                            3. Full ITC (ITC-Infra & Platform)
                                        </label>
                                        <small class="form-text d-block mt-0">Infra และ Platform (เช่น ECS, RDS) ดูแลโดย ITC</small>
                                    </div>
                                </div>
                                
                                <div class="border rounded p-3 mb-2">
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="support_model" id="model-2" value="hybrid-itc-infra">
                                        <label class="form-check-label fw-bold" for="model-2">
                                            2. Hybrid (ITC-Infra)
                                        </label>
                                        <small class="form-text d-block mt-0">Infra โดย ITC / Platform และ Service โดย Vendor</small>
                                    </div>
                                </div>

                                <div class="border rounded p-3 mb-2">
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="support_model" id="model-1" value="full-vendor">
                                        <label class="form-check-label fw-bold" for="model-1">
                                            1. Full Vendor Managed
                                        </label>
                                        <small class="form-text d-block mt-0">Account และ Service ทั้งหมดโดย Vendor (ต้องผ่าน Governance Review)</small>
                                    </div>
                                </div>
                            </div>

                            <div class="d-flex justify-content-between gap-2 mt-4">
                                <button type="button" class="btn btn-outline-secondary" id="prev-step-2">
                                    <i class="bi bi-arrow-left"></i>
                                    ย้อนกลับ (Previous)
                                </button>
                                <div class="d-flex gap-2">
                                    <button type="button" class="btn btn-secondary">บันทึกร่าง (Save Draft)</button>
                                    <button type="submit" class="btn btn-primary">
                                        <i class="bi bi-send-fill"></i>
                                        ส่งเพื่อพิจารณา (Submit)
                                    </button>
                                </div>
                            </div>
                        </div>

                    </form>
                </div>
            </div>
        </div>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        // Multi-step form functionality
        let currentStep = 1;
        const totalSteps = 2;

        function showStep(step) {
            // Hide all steps
            document.querySelectorAll('.form-step').forEach(stepEl => {
                stepEl.classList.remove('active');
            });
            
            // Show current step
            document.getElementById(`step-${step}`).classList.add('active');
            
            // Update step indicator
            document.querySelectorAll('.step-item').forEach((item, index) => {
                const stepNumber = index + 1;
                item.classList.remove('active', 'completed');
                
                if (stepNumber < step) {
                    item.classList.add('completed');
                } else if (stepNumber === step) {
                    item.classList.add('active');
                }
            });
            
            currentStep = step;
        }

        function validateStep1() {
            const projectName = document.getElementById('project-name').value.trim();
            const costCenter = document.getElementById('cost-center').value.trim();
            const projectManager = document.getElementById('project-manager').value.trim();
            const projectDescription = document.getElementById('project-description').value.trim();
            const projectStartDate = document.getElementById('project-start-date').value;
            const projectEndDate = document.getElementById('project-end-date').value;
            const projectSla = document.getElementById('project-sla').value.trim();
            const projectPriority = document.getElementById('project-priority').value;
            const environmentsChecked = document.querySelectorAll('.environment-checkbox:checked').length > 0;
            
            // Clear previous validation states
            document.getElementById('project-name').classList.remove('is-invalid');
            document.getElementById('cost-center').classList.remove('is-invalid');
            document.getElementById('project-manager').classList.remove('is-invalid');
            document.getElementById('project-description').classList.remove('is-invalid');
            document.getElementById('project-start-date').classList.remove('is-invalid');
            document.getElementById('project-end-date').classList.remove('is-invalid');
            document.getElementById('project-sla').classList.remove('is-invalid');
            document.getElementById('project-priority').classList.remove('is-invalid');
            document.getElementById('env-error').style.display = 'none';
            
            let isValid = true;
            
            if (!projectName) {
                document.getElementById('project-name').classList.add('is-invalid');
                isValid = false;
            }
            
            if (!costCenter) {
                document.getElementById('cost-center').classList.add('is-invalid');
                isValid = false;
            }
            
            if (!projectManager) {
                document.getElementById('project-manager').classList.add('is-invalid');
                isValid = false;
            }
            
            if (!projectDescription) {
                document.getElementById('project-description').classList.add('is-invalid');
                isValid = false;
            }
            
            if (!projectStartDate) {
                document.getElementById('project-start-date').classList.add('is-invalid');
                isValid = false;
            }
            
            if (!projectEndDate) {
                document.getElementById('project-end-date').classList.add('is-invalid');
                isValid = false;
            }
            
            // Validate that end date is after start date
            if (projectStartDate && projectEndDate && projectEndDate < projectStartDate) {
                document.getElementById('project-end-date').classList.add('is-invalid');
                isValid = false;
            }
            
            if (!projectSla) {
                document.getElementById('project-sla').classList.add('is-invalid');
                isValid = false;
            }
            
            if (!projectPriority) {
                document.getElementById('project-priority').classList.add('is-invalid');
                isValid = false;
            }
            
            if (!environmentsChecked) {
                document.getElementById('env-error').style.display = 'block';
                isValid = false;
            }
            
            return isValid;
        }

        function validateStep2() {
            const architectureFile = document.getElementById('architecture-file').files.length > 0;
            const supportModel = document.querySelector('input[name="support_model"]:checked');
            
            // Clear previous validation states
            document.getElementById('architecture-file').classList.remove('is-invalid');
            
            let isValid = true;
            
            if (!architectureFile) {
                document.getElementById('architecture-file').classList.add('is-invalid');
                isValid = false;
            }
            
            if (!supportModel) {
                isValid = false;
            }
            
            return isValid;
        }

        // Next button for step 1
        document.getElementById('next-step-1').addEventListener('click', function() {
            if (validateStep1()) {
                showStep(2);
            } else {
                // Show alert
                alert('กรุณากรอกข้อมูลที่จำเป็นให้ครบถ้วน (Please fill in all required fields)');
            }
        });

        // Previous button for step 2
        document.getElementById('prev-step-2').addEventListener('click', function() {
            showStep(1);
        });

        // Form submission
        document.getElementById('project-onboarding-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            if (validateStep2()) {
                alert('ส่งแบบฟอร์มสำเร็จ! (Form submitted successfully!)');
                // Here you would typically send the form data to a server
            } else {
                alert('กรุณากรอกข้อมูลที่จำเป็นให้ครบถ้วน (Please fill in all required fields)');
            }
        });

        // Initialize
        showStep(1);
    </script>
</body>
</html>